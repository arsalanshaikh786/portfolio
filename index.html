<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Arsalan Shaikh — Resume</title>
  <style>
    :root{--accent:#2563eb;--bg:#f3f4f6;--card:#fff;--text:#0f172a;--muted:#6b7280}
    body{font-family:Inter,system-ui,Segoe UI,Arial;margin:0;background:var(--bg);color:var(--text)}
    header{background:linear-gradient(90deg,var(--accent),#4f46e5);color:white;padding:20px 18px;display:flex;align-items:center;justify-content:space-between}
    .container{max-width:1100px;margin:26px auto;padding:16px}
    .hero{display:flex;gap:22px;align-items:center}
    .avatar{width:130px;height:130px;border-radius:16px;overflow:hidden;background:#fff;box-shadow:0 8px 24px rgba(2,6,23,0.08)}
    .avatar img{width:100%;height:100%;object-fit:cover}
    h1{margin:0;font-size:30px}
    p.lead{margin:6px 0;color:var(--muted);font-size:15px}
    .grid{display:grid;grid-template-columns:1fr 340px;gap:18px;margin-top:20px}
    .card{background:var(--card);border-radius:12px;padding:18px;box-shadow:0 6px 20px rgba(15,23,42,0.06)}
    .skills{display:flex;flex-wrap:wrap;gap:10px}
    .skill{background:#eef2ff;padding:6px 12px;border-radius:999px;font-size:13px;border:1px solid #c7d2fe}
    .projects{display:grid;gap:12px}
    .project{border-radius:10px;padding:12px;border:1px solid #eef2f6}
    .small{font-size:13px;color:var(--muted)}
    a.btn{display:inline-block;padding:10px 14px;border-radius:10px;background:var(--accent);color:white;text-decoration:none;font-weight:600}
    @media(max-width:900px){.grid{grid-template-columns:1fr}.avatar{width:100px;height:100px}}
  </style>
</head>
<body>
  <header>
    <div style="display:flex;gap:12px;align-items:center">
      <strong style="font-size:18px">Arsalan Shaikh</strong>
      <small style="opacity:0.9">Resume</small>
    </div>
    <div>
      <a class="btn" href="admin.html" style="background:white;color:var(--accent);">Admin</a>
    </div>
  </header>

  <main class="container">
    <section class="card hero" id="heroCard">
      <div class="avatar"><img id="profileAvatar" src="https://via.placeholder.com/400x400?text=Profile" alt="profile" /></div>
      <div>
        <h1 id="fullName">Loading...</h1>
        <p class="lead" id="intro">Please wait — loading info.</p>
        <div style="margin-top:12px">
          <a id="downloadResumeBtn" class="btn" href="#" target="_blank">Download Resume</a>
        </div>
      </div>
    </section>

    <div class="grid">
      <div>
        <div class="card">
          <h3>About</h3>
          <p id="aboutText" class="small">—</p>
        </div>

        <div class="card" style="margin-top:14px">
          <h3>Projects</h3>
          <div id="projectsList" class="projects"></div>
        </div>

        <div class="card" style="margin-top:14px">
          <h3>Certificates & Documents</h3>
          <ul id="docsList" class="small"></ul>
        </div>
      </div>

      <aside>
        <div class="card">
          <h4>Skills</h4>
          <div id="skillsWrap" class="skills"></div>
        </div>

        <div class="card" style="margin-top:14px">
          <h4>Education</h4>
          <div id="educationWrap"></div>
        </div>

        <div class="card" style="margin-top:14px">
          <h4>Contact</h4>
          <p class="small">Email: <span id="contactEmail">—</span></p>
          <p class="small">Phone: <span id="contactPhone">—</span></p>
          <div style="margin-top:10px"><a id="portfolioLink" class="btn" href="#" target="_blank">Portfolio</a></div>
        </div>
      </aside>
    </div>
  </main>

  <script type="module">
    import { getProfileDoc } from './firebase-config.js';

    const fullName = document.getElementById('fullName');
    const intro = document.getElementById('intro');
    const profileAvatar = document.getElementById('profileAvatar');
    const aboutText = document.getElementById('aboutText');
    const skillsWrap = document.getElementById('skillsWrap');
    const educationWrap = document.getElementById('educationWrap');
    const projectsList = document.getElementById('projectsList');
    const docsList = document.getElementById('docsList');
    const downloadResumeBtn = document.getElementById('downloadResumeBtn');
    const contactEmail = document.getElementById('contactEmail');
    const contactPhone = document.getElementById('contactPhone');
    const portfolioLink = document.getElementById('portfolioLink');

    async function loadProfile(){
      try{
        const data = await getProfileDoc();
        if(!data){
          fullName.textContent = 'Arsalan Shaikh';
          intro.textContent = 'Student & Web Developer';
          aboutText.textContent = 'This resume is empty. Open admin.html to edit.';
          return;
        }
        fullName.textContent = data.name || 'Arsalan Shaikh';
        intro.textContent = data.intro || '';
        profileAvatar.src = data.photoLink || profileAvatar.src;
        aboutText.textContent = (data.intro || '') + '\n\n' + (data.education ? (data.education.join(' | ')) : '');
        // resume
        downloadResumeBtn.href = data.resumeLink || '#';
        // skills
        skillsWrap.innerHTML = '';
        (data.skills||[]).forEach(s=>{
          const sp = document.createElement('span'); sp.className='skill'; sp.textContent = s; skillsWrap.appendChild(sp);
        });
        // education
        educationWrap.innerHTML = '';
        (data.education||[]).forEach(e=>{
          const p = document.createElement('p'); p.className='small'; p.textContent = e; educationWrap.appendChild(p);
        });
        // projects
        projectsList.innerHTML = '';
        (data.projects||[]).forEach(p=>{
          const d = document.createElement('div'); d.className='project'; d.textContent = p; projectsList.appendChild(d);
        });
        // documents
        docsList.innerHTML = '';
        (data.documents||[]).forEach(d=>{
          const li = document.createElement('li');
          const parts = d.split('|').map(x=>x.trim());
          const label = parts[0] || parts[1] || 'Document';
          const url = parts[1] || parts[0];
          const a = document.createElement('a'); a.href = url; a.target='_blank'; a.rel='noopener'; a.textContent = label;
          li.appendChild(a);
          docsList.appendChild(li);
        });
        contactEmail.textContent = data.contactEmail || '—';
        contactPhone.textContent = data.contactPhone || '—';
        portfolioLink.href = data.externalLink || '#';
      }catch(e){
        console.error('load profile err', e);
        fullName.textContent = 'Arsalan Shaikh';
        intro.textContent = 'Student & Web Developer';
      }
    }

    loadProfile();
  </script>
</body>
</html>
